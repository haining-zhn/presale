<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="multipart/form-data; charset=utf-8" />
    <title>{$Think.config.siteadmin}</title>
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/main/css/z-UI.css"/>
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/main/z-UI-alert/css/z-UI.alert.css"/>
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/main/ssssz-UI-tab/css/z-UI.tab.css"/>
    <script type="text/javascript" src="__PUBLIC__/main/z-UI.js"></script>
    <script type="text/javascript" src="__PUBLIC__/main/z-UI-alert/js/z-UI.alert.js"></script>
    <script type="text/javascript" src="__PUBLIC__/main/z-UI-tab/js/z-UI.tab.js"></script>
	<script type="text/javascript" src="__PUBLIC__/wenbenjs/js.min.js"></script> <!--  修改密码 -->
    <style>
		html,body{
            width: 100%;height: 100%;
            margin:0;
        }
        select {
            appearance: none;
            outline: 0;
            background: white;
            background-image: none;
            width: 90%;
            height: 90%;
            color: black;
            cursor: pointer;
            border: 1px solid #DDDDDD;
            border-radius: 3px;
        }
    </style>
</head>
<body>

<div style="overflow-y: auto;box-sizing: border-box;padding: 20px;" class="zUI-full">
    <div class="zUI-card sm" >
        <div class="zUI-card-title">
            <div class="text">网站设置</div>
        </div>
        <div class="zUI-card-wrap">
            <form class="zUI-form" name="myForm" id="fm"  enctype="multipart/form-data">
                <div class="zUI-items">
                    <div class="zUI-form-line">
                        <div class="zUI-form-label">
                            网站名称
                        </div>
                        <div class="zUI-form-item">
							<input type="text"  class="zUI-input" name="Webset_sitename"  value="{$websetlist['Webset_sitename']}" placeholder="输入网站名称" required="required" />
                        </div><span style="color:red;">*</span>
                    </div>
                    <div class="zUI-form-line">
                        <div class="zUI-form-label">
                            站长主页名称
                        </div>
                        <div class="zUI-form-item">
							<input type="text"  class="zUI-input" name="Webset_adminname"  value="{$websetlist['Webset_adminname']}" required="required" placeholder="输入站长主页名称" />
                        </div><span style="color:red;">*</span>
                    </div>
                    <div class="zUI-form-line">
                        <div class="zUI-form-label">
                            站长主页URL
                        </div>
                        <div class="zUI-form-item">
							<input type="text"  class="zUI-input" name="Webset_adminurl"  value="{$websetlist['Webset_adminurl']}" required="required" placeholder="输入ICP网址，含http或https" />
                        </div><span style="color:red;">*</span>
                    </div>
                    <div class="zUI-form-line">
                        <div class="zUI-form-label">
                            备案号
                        </div>
                        <div class="zUI-form-item">
							<input type="text"  class="zUI-input" name="Webset_icpname"  value="{$websetlist['Webset_icpname']}" required="required" placeholder="输入备案号" />
                        </div><span style="color:red;">*</span>
                    </div>
                    <div class="zUI-form-line">
                        <div class="zUI-form-label">
                            ICP网址
                        </div>
                        <div class="zUI-form-item">
							<input type="text"  class="zUI-input" name="Webset_icpurl"  value="{$websetlist['Webset_icpurl']}" required="required" placeholder="输入ICP网址，含http或https" />
                        </div><span style="color:red;">*</span>
                    </div>
                    <div class="zUI-form-line">
                        <div class="zUI-form-label">
                            用户初始密码
                        </div>
                        <div class="zUI-form-item">
							<input type="text"  class="zUI-input" name="Webset_usersdefaultpwd"  value="{$websetlist['Webset_usersdefaultpwd']}"  required="required" placeholder="用户初始密码" />
                        </div><span style="color:red;">*</span>
                    </div>
                    <div class="zUI-form-line" style="height:130px;width:600px;">
                        <div class="zUI-form-label" style="height:130px;line-height:130px;">
                            登录背景URL(http://或https://)
                        </div>
                        <div class="zUI-form-item">
							<input type="text"  class="zUI-input" name="Webset_loginurl1"  value="{$websetlist['Webset_loginurl1']}" placeholder="背景图片1，输入全连接图片路径，含http或https" /><br />
							<input type="text"  class="zUI-input" name="Webset_loginurl2"  value="{$websetlist['Webset_loginurl2']}" placeholder="背景图片2，输入全连接图片路径，含http或https" /><br />
							<input type="text"  class="zUI-input" name="Webset_loginurl3"  value="{$websetlist['Webset_loginurl3']}" placeholder="背景图片3，输入全连接图片路径，含http或https" />
                        </div><span style="color:red;">&nbsp;</span>
                    </div>
                    <div class="zUI-form-line zUI-form-btns" style="margin:0 40%">
						<input type="hidden" name="id" value="1" />
						
                        <input type="button" name="anniu" class="zUI-btn info" id="btn" value="保存"  onclick="submitFrom()" />
						<!-- <button style="background-color:green;" onclick="window.location.href = '__APP__/Main/clear'" class="zUI-btn info" >清除缓存</button> -->
						<!-- <input type="button" style="background-color:green;" name="anniu" class="zUI-btn info" id="btn" value="清除缓存"  onclick="submitFrom()" /> -->
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
<!--提示确认动画样式-->
<script src="__PUBLIC__/windows/js/showLoading.js" type="text/javascript" charset="utf-8"></script>
<script src="__PUBLIC__/windows/js/jquery-3.4.1.min.js" type="text/javascript"></script>

<script>
    //提交
        document.getElementById('btn').onclick = function () { 
			//验证数据为空
			if(!myForm.Webset_sitename.value){
				myForm.Webset_sitename.focus();
				return;
			};
			if(!myForm.Webset_adminname.value){
				myForm.Webset_adminname.focus();
				return;
			};
			if(!myForm.Webset_adminurl.value){
				myForm.Webset_adminurl.focus();
				return;
			};
			if(!myForm.Webset_icpname.value){
				myForm.Webset_icpname.focus();
				return;
			};
			if(!myForm.Webset_icpurl.value){
				myForm.Webset_icpurl.focus();
				return;
			};
			if(!myForm.Webset_usersdefaultpwd.value){
				myForm.Webset_usersdefaultpwd.focus();
				return;
			};
			
			//找到表单DOM对象
            var fm = document.getElementById('fm');
            // 创建FormData对象并传递表单
            var fd = new FormData(fm);
			var url='__APP__/Main/websetaction';
            var xhr = new XMLHttpRequest();
            //接口fd：收到提交的数据后会返回收到的数据
            xhr.open('POST',url, '/fd');
            xhr.send(fd);

			xhr.onreadystatechange=function(){
				if(xhr.readyState==4&&xhr.status==200){
						
					if(xhr.responseText!=1){
						return errorjieguo(xhr.responseText);
					}else{ 
						return successjieguo();	
					}
				};

			};
        }
	function successjieguo(){
		showLoading({
			title: "保存成功！", //提示文字
			icon: 'success', // 图标，有效值 "success", "loading", "none"
			image: '', // 自定义图标的本地路径，image 的优先级高于 icon
			duration: 2000, //提示的延迟时间，单位毫秒，默认：1500
			mask: true, // 是否显示透明蒙层，防止触摸穿透，默认：false
			success: function(res) { //接口调用成功的回调函数
				console.log(JSON.stringify(res))
			},
		});
		window.location.href = "__APP__/Main/webset" ;
	}
	function errorjieguo(a){
		showModal({ 
			title: "温馨提示",  //提示的标题
			content: a,  //提示的内容
			titleColor:'red',
			showCancel: false,  //是否显示取消按钮，默认为 true
			cancelText: 'no',  //取消按钮的文字，默认为"取消"，最多 4 个字符
			cancelColor: "#fff",  //取消按钮的文字颜色，默认为"#000000"
			cancelBgColor: '#4c4c4c',  //取消按钮的背景颜色 
			confirmText: '已知晓',
			confirmColor: '#fff',
			confirmBgColor: '#55aaff',
			success: function(res) {
				if (res.confirm) {
					console.log('yes');
				} else {
					console.log('no');
				}
			}
		});
	}

</script>

</body>
</html>